<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>02-Extract entity co-ocurrences with POS • networds</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="02-Extract entity co-ocurrences with POS">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">networds</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/02-Extract-entity-co-ocurrences-with-POS.html">02-Extract entity co-ocurrences with POS</a></li>
    <li><a class="dropdown-item" href="../articles/entities_and_relation_extraction.html">01 - Entity extraction with regex</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/SoaresAlisson/networds/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="02-Extract-entity-co-ocurrences-with-POS_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="02-Extract-entity-co-ocurrences-with-POS_files/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="02-Extract-entity-co-ocurrences-with-POS_files/vis-9.1.0/vis-network.min.js"></script><script src="02-Extract-entity-co-ocurrences-with-POS_files/visNetwork-binding-2.1.2/visNetwork.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>02-Extract entity co-ocurrences with POS</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/SoaresAlisson/networds/blob/HEAD/vignettes/02-Extract-entity-co-ocurrences-with-POS.Rmd" class="external-link"><code>vignettes/02-Extract-entity-co-ocurrences-with-POS.Rmd</code></a></small>
      <div class="d-none name"><code>02-Extract-entity-co-ocurrences-with-POS.Rmd</code></div>
    </div>

    
    
<p>Loading the library</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/SoaresAlisson/networds" class="external-link">networds</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://spacyr.quanteda.io" class="external-link">spacyr</a></span><span class="op">)</span></span></code></pre></div>
<p>Extracting proper names or entities with regex are quick, but has its
limitations. In this section, we will use the Part of Speech (POS) tags
to extract the entities, proper names, noun phrases and its
co-occurrences to generate graphs. In R, to tag words with POS, the main
packages are {UDPipe} and {SpacyR}.</p>
<div class="section level2">
<h2 id="installing-spacyr">Installing SpacyR<a class="anchor" aria-label="anchor" href="#installing-spacyr"></a>
</h2>
<p>First of all, we need to install the {<a href="https://spacyr.quanteda.io/" class="external-link">spacyR</a>} package. It is a wrap
around the Spacy package in Python, and SpacyR deals with the boring
parts of creating an exclusive python virtual environment. This package
will extract the NER (named entities) and POS (part of speech
tagging).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"spacyr"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># if you prefer, or maybe if the CRAN version is buggy, install the GitHub one:</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pkg_install.html" class="external-link">pkg_install</a></span><span class="op">(</span><span class="st">"quanteda/spacyr"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># to Install spaCy and requirements (python env). With empty parameters, it will</span></span>
<span><span class="co"># install the default “en_core_web_sm” model.</span></span>
<span><span class="fu">spacyr</span><span class="fu">::</span><span class="fu"><a href="http://spacyr.quanteda.io/reference/spacy_install.html" class="external-link">spacy_install</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">spacyr</span><span class="fu">::</span><span class="fu"><a href="http://spacyr.quanteda.io/reference/spacy_initialize.html" class="external-link">spacy_initialize</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The {networds} comes with this text sample. In this tutorial, we will
use different parts of the text to a better visualization.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"networds"</span><span class="op">)</span> <span class="co"># list the available dataset in package networds</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Text_sample of the package</span></span>
<span><span class="co"># An example of text. Showing only the firsts lines</span></span>
<span><span class="va">txt_wiki</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "Killing of Brian Thompson - Wikipedia"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </span></span>
<span><span class="co">#&gt; [2] " "                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               </span></span>
<span><span class="co">#&gt; [3] "Brian Thompson, the 50-year-old CEO of the American health insurance company UnitedHealthcare, was shot and killed in Midtown Manhattan, New York City, on December 4, 2024. The shooting occurred early in the morning outside an entrance to the New York Hilton Midtown hotel.[4] Thompson was in the city to attend an annual investors' meeting for UnitedHealth Group, the parent company of UnitedHealthcare. Prior to his death, he faced criticism for the company's rejection of insurance claims, and his family reported that he had received death threats in the past. The suspect, initially described as a white man wearing a mask, fled the scene.[1] On December 9, 2024, authorities arrested 26-year-old Luigi Mangione in Altoona, Pennsylvania, and charged him with Thompson's murder in a Manhattan court.[5][6][7]"                                                                                                                                                                                                                                                                                                                                    </span></span>
<span><span class="co">#&gt; [4] "Authorities said Mangione was carrying a 3D-printed pistol and a 3D-printed suppressor consistent with those used in the attack, as well as a short handwritten letter to federal law enforcement (characterized as a manifesto) criticizing America's healthcare system, a U.S. passport, and multiple fraudulent IDs, including one with the same name the alleged shooter used to check into a hostel on the Upper West Side of Manhattan.[8][9][10] Authorities also said his fingerprints matched those that investigators found near the New York shooting scene.[11] Mangione was held without bail in Pennsylvania on charges of possession of an unlicensed firearm, forgery, and providing false New Jersey-resident identification to police.[12] Mangione also has an arrest warrant with five felony counts in New York, including second-degree murder.[13] Mangione's lawyer said he will plead not guilty to the charges.[12] Police believe that he was inspired by Ted Kaczynski's essay Industrial Society and Its Future (1995), and motivated by his personal views on health insurance.[14][15] They say an injury he suffered may have played a part.[16]"</span></span>
<span><span class="co">#&gt; [5] "Online and social media reactions to the killing ranged from contempt and mockery toward Thompson and UnitedHealth Group, to sympathy and praise for the assailant. More broadly, social media users criticized the U.S. healthcare system, and many users characterized the killing as deserved or justified. These attitudes were related to anger over UnitedHealth's business practices and those of the United States health insurance industry in general – primarily the strategy to deny coverage to clients. In particular, Thompson's death was compared to the harm or death experienced by clients who were denied coverage by insurance companies. Some public officials expressed dismay and offered condolences to Thompson's family. Inquiries about protective services and security for CEOs and corporate executives surged following the killing. "</span></span>
<span></span>
<span><span class="va">POS</span> <span class="op">&lt;-</span> <span class="va">txt_wiki</span> <span class="op">|&gt;</span> <span class="fu">spacyr</span><span class="fu">::</span><span class="fu"><a href="http://spacyr.quanteda.io/reference/spacy_parse.html" class="external-link">spacy_parse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; successfully initialized (spaCy Version: 3.8.5, language model: en_core_web_sm)</span></span>
<span><span class="co"># parsing the POS tagging in it</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="extracting-entities">Extracting entities<a class="anchor" aria-label="anchor" href="#extracting-entities"></a>
</h2>
<p>The package {spacyr} has two functions useful in this section. Both
of them conflate compound nouns, like “New” and “York” into “New_York”.
The first one, extract only the entities</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">POS</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">spacyr</span><span class="fu">::</span><span class="fu"><a href="http://spacyr.quanteda.io/reference/entity_extract.html" class="external-link">entity_extract</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># use tibble to better visualize</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 284 × 4</span></span></span>
<span><span class="co">#&gt;    doc_id sentence_id entity                      entity_type</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> text1            1 Brian_Thompson_-_Wikipedia  PERSON     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> text3            1 Brian_Thompson              PERSON     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> text3            1 American                    NORP       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> text3            1 UnitedHealthcare            ORG        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> text3            1 Midtown_Manhattan           GPE        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> text3            1 New_York_City               GPE        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> text3            2 the_New_York_Hilton_Midtown ORG        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> text3            3 Thompson                    PERSON     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> text3            3 UnitedHealth_Group          ORG        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> text3            3 UnitedHealthcare            ORG        </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 274 more rows</span></span></span></code></pre></div>
<p>The second one, conflates the compound nouns and preserve the other
POS tags.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">POS</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">spacyr</span><span class="fu">::</span><span class="fu"><a href="http://spacyr.quanteda.io/reference/entity_extract.html" class="external-link">entity_consolidate</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># use tibble to better visualize</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4,641 × 7</span></span></span>
<span><span class="co">#&gt;    doc_id sentence_id token_id token                     lemma pos   entity_type</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> text1            1        1 <span style="color: #949494;">"</span>Killing<span style="color: #949494;">"</span>                 <span style="color: #949494;">"</span>Kil… PROPN <span style="color: #949494;">""</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> text1            1        2 <span style="color: #949494;">"</span>of<span style="color: #949494;">"</span>                      <span style="color: #949494;">"</span>of<span style="color: #949494;">"</span>  ADP   <span style="color: #949494;">""</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> text1            1        3 <span style="color: #949494;">"</span>Brian_Thompson_-_Wikipe… <span style="color: #949494;">"</span>Bri… ENTI… <span style="color: #949494;">"</span>PERSON<span style="color: #949494;">"</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> text2            1        1 <span style="color: #949494;">"</span> <span style="color: #949494;">"</span>                       <span style="color: #949494;">"</span> <span style="color: #949494;">"</span>   SPACE <span style="color: #949494;">""</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> text3            1        1 <span style="color: #949494;">"</span>Brian_Thompson<span style="color: #949494;">"</span>          <span style="color: #949494;">"</span>Bri… ENTI… <span style="color: #949494;">"</span>PERSON<span style="color: #949494;">"</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> text3            1        2 <span style="color: #949494;">"</span>,<span style="color: #949494;">"</span>                       <span style="color: #949494;">"</span>,<span style="color: #949494;">"</span>   PUNCT <span style="color: #949494;">""</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> text3            1        3 <span style="color: #949494;">"</span>the<span style="color: #949494;">"</span>                     <span style="color: #949494;">"</span>the<span style="color: #949494;">"</span> DET   <span style="color: #949494;">""</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> text3            1        4 <span style="color: #949494;">"</span>50_-_year_-_old<span style="color: #949494;">"</span>         <span style="color: #949494;">"</span>50_… ENTI… <span style="color: #949494;">"</span>DATE<span style="color: #949494;">"</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> text3            1        5 <span style="color: #949494;">"</span>CEO<span style="color: #949494;">"</span>                     <span style="color: #949494;">"</span>ceo<span style="color: #949494;">"</span> NOUN  <span style="color: #949494;">""</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> text3            1        6 <span style="color: #949494;">"</span>of<span style="color: #949494;">"</span>                      <span style="color: #949494;">"</span>of<span style="color: #949494;">"</span>  ADP   <span style="color: #949494;">""</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 4,631 more rows</span></span></span></code></pre></div>
<p>This functions is used inside {networds}. Lets use the package text
example. <!-- You can use whatever you want. --></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">POS</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/group_ppn.html">group_ppn</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4,975 × 8</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Groups:   name [1,650]</span></span></span>
<span><span class="co">#&gt;    doc_id sentence_id token_id token       lemma       pos   entity     name    </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> text1            1        1 <span style="color: #949494;">"</span>Killing<span style="color: #949494;">"</span>   <span style="color: #949494;">"</span>Killing<span style="color: #949494;">"</span>   PROPN <span style="color: #949494;">""</span>         <span style="color: #949494;">"</span>Killin…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> text1            1        2 <span style="color: #949494;">"</span>of<span style="color: #949494;">"</span>        <span style="color: #949494;">"</span>of<span style="color: #949494;">"</span>        ADP   <span style="color: #949494;">""</span>         <span style="color: #949494;">"</span>of Bri…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> text1            1        3 <span style="color: #949494;">"</span>Brian<span style="color: #949494;">"</span>     <span style="color: #949494;">"</span>Brian<span style="color: #949494;">"</span>     PROPN <span style="color: #949494;">"</span>PERSON_B<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>of Bri…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> text1            1        4 <span style="color: #949494;">"</span>Thompson<span style="color: #949494;">"</span>  <span style="color: #949494;">"</span>Thompson<span style="color: #949494;">"</span>  PROPN <span style="color: #949494;">"</span>PERSON_I<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>of Bri…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> text1            1        5 <span style="color: #949494;">"</span>-<span style="color: #949494;">"</span>         <span style="color: #949494;">"</span>-<span style="color: #949494;">"</span>         PUNCT <span style="color: #949494;">"</span>PERSON_I<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>- Wiki…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> text1            1        6 <span style="color: #949494;">"</span>Wikipedia<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>Wikipedia<span style="color: #949494;">"</span> PROPN <span style="color: #949494;">"</span>PERSON_I<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>- Wiki…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> text2            1        1 <span style="color: #949494;">"</span> <span style="color: #949494;">"</span>         <span style="color: #949494;">"</span> <span style="color: #949494;">"</span>         SPACE <span style="color: #949494;">""</span>         <span style="color: #949494;">"</span>  Bria…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> text3            1        1 <span style="color: #949494;">"</span>Brian<span style="color: #949494;">"</span>     <span style="color: #949494;">"</span>Brian<span style="color: #949494;">"</span>     PROPN <span style="color: #949494;">"</span>PERSON_B<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  Bria…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> text3            1        2 <span style="color: #949494;">"</span>Thompson<span style="color: #949494;">"</span>  <span style="color: #949494;">"</span>Thompson<span style="color: #949494;">"</span>  PROPN <span style="color: #949494;">"</span>PERSON_I<span style="color: #949494;">"</span> <span style="color: #949494;">"</span>  Bria…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> text3            1        3 <span style="color: #949494;">"</span>,<span style="color: #949494;">"</span>         <span style="color: #949494;">"</span>,<span style="color: #949494;">"</span>         PUNCT <span style="color: #949494;">""</span>         <span style="color: #949494;">"</span>,<span style="color: #949494;">"</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 4,965 more rows</span></span></span></code></pre></div>
<p>With the function in {networds}, is possible to give the whole text
as input, search for a term/query. The package will tokenize in
sentences (or in paragraphs, if specified in parameters), perform the
POS tagging, and extract the graph. Is possible to run the whole process
or go step by step, to understand what is going on. First, we’ll do the
first option.</p>
<p>If the text worked is not great, is possible to extract the all the
co-occurrences and then work, but it comes with costs. It can easily
escalate a lot in size in many times the origial text size, take a lot
of time and computational costs. For example, 345Mb of text can become
15Gb of POS tagged text. So, another approach is to build the
co-occurrences more wisely, departing from specific words, then
processing only the text that matters.</p>
<p>The function <code><a href="../reference/filter_by_query.html">filter_by_query()</a></code> tokenize the text by
sentence by default (to use paragraph instead, use the parameter
<code>by_sentence = FALSE</code>).</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># tokenizing in sentences and filtering three lines that contains the word "police"</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">txt_wiki</span><span class="op">[</span><span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/filter_by_query.html">filter_by_query</a></span><span class="op">(</span><span class="st">"Police"</span><span class="op">)</span></span>
<span><span class="va">x</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; character(0)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; [1] "11] Mangione was held without bail in Pennsylvania on charges of possession of an unlicensed firearm, forgery, and providing false New Jersey-resident identification to police.["</span></span>
<span><span class="co">#&gt; [2] "12] Police believe that he was inspired by Ted Kaczynski's essay Industrial Society and Its Future (1995), and motivated by his personal views on health insurance.["             </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[3]]</span></span>
<span><span class="co">#&gt; character(0)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[4]]</span></span>
<span><span class="co">#&gt; character(0)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "list"</span></span></code></pre></div>
<p>Is possible to return a vector instead of a list object</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">txt_wiki</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">12</span><span class="op">]</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/filter_by_query.html">filter_by_query</a></span><span class="op">(</span><span class="st">"Police"</span>, unlist <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">x</span></span>
<span><span class="co">#&gt; [1] "11] Mangione was held without bail in Pennsylvania on charges of possession of an unlicensed firearm, forgery, and providing false New Jersey-resident identification to police.["</span></span>
<span><span class="co">#&gt; [2] "12] Police believe that he was inspired by Ted Kaczynski's essay Industrial Society and Its Future (1995), and motivated by his personal views on health insurance.["             </span></span>
<span><span class="co">#&gt; [3] "39] According to the police, he then left the city from the George Washington Bridge Bus Station farther uptown in Upper Manhattan.["</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "character"</span></span></code></pre></div>
<p>The next step is the POS tagging using <code><a href="../reference/parsePOS.html">parsePOS()</a></code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">txt_wiki</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">12</span><span class="op">]</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/filter_by_query.html">filter_by_query</a></span><span class="op">(</span><span class="st">"Police"</span>, unlist <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/parsePOS.html">parsePOS</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;   doc_id sentence_id                                   entity entity_type</span></span>
<span><span class="co">#&gt; 1  text1           1                             Pennsylvania         GPE</span></span>
<span><span class="co">#&gt; 2  text1           1                               New_Jersey         GPE</span></span>
<span><span class="co">#&gt; 3  text1           1                         Ted_Kaczynski_'s      PERSON</span></span>
<span><span class="co">#&gt; 4  text1           1        Industrial_Society_and_Its_Future         ORG</span></span>
<span><span class="co">#&gt; 5  text1           2 the_George_Washington_Bridge_Bus_Station         ORG</span></span>
<span><span class="co">#&gt; 6  text1           2                          Upper_Manhattan         LOC</span></span></code></pre></div>
<p>The next step is to get the graph using
<code><a href="../reference/get_cooc_entities.html">get_cooc_entities()</a></code></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">txt_wiki</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">44</span><span class="op">]</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/filter_by_query.html">filter_by_query</a></span><span class="op">(</span><span class="st">"Police"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/parsePOS.html">parsePOS</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">x</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># use tibble to better visualize</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 26 × 4</span></span></span>
<span><span class="co">#&gt;    doc_id sentence_id entity                                   entity_type</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> text1            1 Pennsylvania                             GPE        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> text1            1 New_Jersey                               GPE        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> text2            1 Ted_Kaczynski_'s                         PERSON     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> text2            1 Industrial_Society_and_Its_Future        ORG        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> text1            2 the_George_Washington_Bridge_Bus_Station ORG        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> text1            2 Upper_Manhattan                          LOC        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> text1            1 Central_Park                             LOC        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> text1            1 New_York_City                            GPE        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> text1            2 Mangione                                 ORG        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> text1            2 the_San_Francisco_Police_Department      ORG        </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 16 more rows</span></span></span>
<span></span>
<span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_cooc_entities.html">get_cooc_entities</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="va">g</span></span>
<span><span class="co">#&gt; $graphs</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 88 × 3</span></span></span>
<span><span class="co">#&gt;    n1               n2                                 freq</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Ted_Kaczynski_'s Industrial_Society_and_Its_Future     2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Altoona          Industrial_Society_and_Its_Future     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Altoona          McDonald                              1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Altoona          Ted_Kaczynski_'s                      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Central_Park     Altoona                               1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Central_Park     Industrial_Society_and_Its_Future     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Central_Park     Mangione                              1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Central_Park     McDonald                              1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Central_Park     New_York_City                         1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Central_Park     San_Francisco                         1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 78 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $isolated_nodes</span></span>
<span><span class="co">#&gt;       node freq</span></span>
<span><span class="co">#&gt; 1 American    1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $nodes</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 18 × 2</span></span></span>
<span><span class="co">#&gt;    node                                      freq</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Industrial_Society_and_Its_Future            2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> New_Jersey                                   2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Ted_Kaczynski_'s                             2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Altoona                                      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> American                                     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Central_Park                                 1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Joseph_Kenny                                 1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Mangione                                     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Manhattan                                    1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> McDonald                                     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> New_York                                     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> New_York_City                                1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> NYPD                                         1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> Pennsylvania                                 1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> San_Francisco                                1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> the_George_Washington_Bridge_Bus_Station     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> the_San_Francisco_Police_Department          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> Upper_Manhattan                              1</span></span></code></pre></div>
<p>Visualizing the graph. It can be done with the function
<code><a href="../reference/q_plot.html">q_plot()</a></code>, the quicker plot, but also with less
customization options.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">g</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/q_plot.html">q_plot</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="02-Extract-entity-co-ocurrences-with-POS_files/figure-html/q_plot-1.png" width="700"></p>
<p>To a better control over the features of the graph,
<code><a href="../reference/plot_pos_graph.html">plot_pos_graph()</a></code> gives more options. The size of dots shows
the frequency of term. The thickness of edges shows how often is the co
occurrence of nodes. The text used is very small, so there is no huge
differences visible. We opted to maintain the words in the same size as
matter of.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">graph_wiki</span> <span class="op">&lt;-</span> <span class="va">txt_wiki</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">44</span><span class="op">]</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/filter_by_query.html">filter_by_query</a></span><span class="op">(</span><span class="st">"Police"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/parsePOS.html">parsePOS</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/get_cooc_entities.html">get_cooc_entities</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/plot_pos_graph.html">plot_pos_graph</a></span><span class="op">(</span><span class="va">graph_wiki</span><span class="op">)</span> <span class="co"># TODO estava dando erro</span></span></code></pre></div>
<p><img src="02-Extract-entity-co-ocurrences-with-POS_files/figure-html/plot_pos_graph-1.png" width="700"></p>
<p>This viz function is based on {ggraph}, that is based on {ggplot2}.
So it is possible to customize it even more.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_pos_graph.html">plot_pos_graph</a></span><span class="op">(</span><span class="va">graph_wiki</span>,</span>
<span>  font_size <span class="op">=</span> <span class="fl">1.3</span>,</span>
<span>  edge_color <span class="op">=</span> <span class="st">"tomato"</span>,</span>
<span>  point_color <span class="op">=</span> <span class="st">"aquamarine4"</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Wordnetwork of Nouns in a Wikipedia text"</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">"The size of dots shows the frequency of the term."</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="02-Extract-entity-co-ocurrences-with-POS_files/figure-html/plot_pos_graph%20+%20ggplot-1.png" width="700"></p>
<p>Plotting an interactive graph (the nodes can become in a crazy dance
to find the best distance between themselves)
<!-- era graph_wiki$edges |> viz_graph() --></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">graph_wiki</span><span class="op">$</span><span class="va">graphs</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/interactive_graph.html">interactive_graph</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:100%;height:900px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"nodes":{"id":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],"label":["Ted_Kaczynski_'s","Altoona","Central_Park","George_Washington_Bridge_Bus_Station","Industrial_Society_and_Its_Future","Mangione","McDonald","NYPD","New_Jersey","New_York","New_York_City","Pennsylvania","San_Francisco","San_Francisco_Police_Department","Upper_Manhattan","Joseph_Kenny","Manhattan"]},"edges":{"from":["1","2","2","2","3","3","3","3","3","3","3","3","4","4","4","4","4","4","4","4","4","4","5","5","5","6","6","6","6","6","6","7","7","8","8","9","9","9","9","9","9","9","9","9","9","9","9","10","11","11","11","11","11","11","11","12","12","12","12","12","12","12","12","12","12","12","12","13","13","13","13","14","14","14","14","14","1","1","1","15","15","15","15","15","15","15","15","15"],"to":["5","5","7","1","2","5","6","7","11","13","14","1","2","3","5","6","7","11","13","14","1","15","16","8","10","2","5","7","13","14","1","5","1","16","10","2","3","4","5","6","17","7","11","13","14","1","15","16","2","5","6","7","13","14","1","2","3","4","5","6","7","9","11","13","14","1","15","2","5","7","1","2","5","7","13","1","16","8","10","2","3","5","6","7","11","13","14","1"],"value":[2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot"},"manipulation":{"enabled":false}},"groups":null,"width":"100%","height":"900px","idselection":{"enabled":true,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":null,"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":false,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"}},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="va">txt_wiki</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">44</span><span class="op">]</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/filter_by_query.html">filter_by_query</a></span><span class="op">(</span><span class="st">"Brian"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/parsePOS.html">parsePOS</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/get_cooc_entities.html">get_cooc_entities</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/plot_pos_graph.html">plot_pos_graph</a></span><span class="op">(</span><span class="va">graph</span><span class="op">)</span></span></code></pre></div>
<p><img src="02-Extract-entity-co-ocurrences-with-POS_files/figure-html/Brian-1.png" width="700"></p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">graph</span><span class="op">$</span><span class="va">graphs</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/interactive_graph.html">interactive_graph</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-e5c8c404fe174e4c81bd" style="width:100%;height:900px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-e5c8c404fe174e4c81bd">{"x":{"nodes":{"id":[1,2,3,4,5],"label":["American","Brian_Thompson","Midtown_Manhattan","UnitedHealthcare","New_York_City"]},"edges":{"from":["1","1","1","2","2","2","2","3","4","4"],"to":["3","5","4","1","3","5","4","5","3","5"],"value":[1,1,1,1,1,1,1,1,1,1],"arrows":["to","to","to","to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot"},"manipulation":{"enabled":false}},"groups":null,"width":"100%","height":"900px","idselection":{"enabled":true,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":null,"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":false,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"}},"evals":[],"jsHooks":[]}</script><p>To get the graph of entities and nouns:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">graph_ppn</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_by_query.html">filter_by_query</a></span><span class="op">(</span><span class="va">txt_wiki</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">44</span><span class="op">]</span>, <span class="st">"Police"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/parsePOS.html">parsePOS</a></span><span class="op">(</span>only_entities <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">entity_type</span> <span class="op">!=</span> <span class="st">"CARDINAL"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># to clean the graph</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>token <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"Police"</span>, <span class="st">"police"</span>, <span class="va">token</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># normalize the term "police"</span></span>
<span>  <span class="fu"><a href="../reference/get_cooc.html">get_cooc</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">graph_ppn</span></span>
<span><span class="co">#&gt; $graphs</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 401 × 3</span></span></span>
<span><span class="co">#&gt;    n1     n2          freq</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> police Mangione       3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 3D     Manhattan      2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 3D     New_Jersey     2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 3D     claim          2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 3D     driver         2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 3D     hostel         2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 3D     license        2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 3D     name           2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 3D     one            2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 3D     police         2</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 391 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $isolated_nodes</span></span>
<span><span class="co">#&gt; [1] node</span></span>
<span><span class="co">#&gt; &lt;0 rows&gt; (or 0-length row.names)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $nodes</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 85 × 2</span></span></span>
<span><span class="co">#&gt;    node                               freq</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> police                               13</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Mangione                              6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> shooter                               4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 3D                                    2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> city                                  2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Industrial_Society_and_Its_Future     2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> motive                                2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> New_Jersey                            2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Pennsylvania                          2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> suspect                               2</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 75 more rows</span></span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/interactive_graph.html">interactive_graph</a></span><span class="op">(</span><span class="va">graph_ppn</span><span class="op">$</span><span class="va">graphs</span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-36aa3d2a04d42bbc2145" style="width:100%;height:900px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-36aa3d2a04d42bbc2145">{"x":{"nodes":{"id":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85],"label":["police","3D","Mangione","Ted_Kaczynski_'s","bag","185_cm","1995","Altoona","American","Central_Park","December_9_,_2024","George_Washington_Bridge_Bus_Station","Industrial_Society_and_Its_Future","Joseph_Kenny","Manhattan","McDonald","New_Jersey","New_York","New_York_City","Pennsylvania","San_Francisco","San_Francisco_police_Department","backpack","bail","camera","charges","city","claim","company","cream","customer","document","driver","emergency","employee","firearm","firearms[30","forgery","ft","gun","health","healthcare","identification","images","information","injury","jacket","job","killer","license","man","mother","motive","name","one","pants","possession","resident","restaurant","reward","room","shooter","shooting","sneakers","suppressor","suspect","system","up_to_$_10,000","use","views","weapon","word","words","hostel","area","soles","insurance","manifesto","December_6_,_2024","Upper_Manhattan","size","July_2023","December_4_,_2024","savvy","NYPD"]},"edges":{"from":["1","2","2","2","2","2","2","2","2","2","2","2","2","2","3","3","3","4","5","1","1","1","1","1","1","6","6","6","6","6","7","7","7","2","2","8","8","8","8","8","8","9","9","9","10","11","11","11","12","13","13","13","13","14","14","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","15","16","16","17","17","17","17","17","17","17","17","17","17","18","18","18","19","19","19","19","19","20","20","20","20","20","20","20","20","20","20","20","20","20","21","21","22","22","22","22","4","4","4","4","23","23","5","5","5","5","5","5","5","5","5","5","5","5","5","5","24","24","24","24","24","24","24","24","24","25","26","26","26","26","26","26","26","27","27","28","28","28","28","28","28","28","28","28","28","29","30","30","30","30","31","31","31","32","32","32","32","33","33","33","33","33","33","34","34","35","35","35","35","35","36","36","36","36","36","37","37","38","38","38","38","39","39","39","39","39","39","40","40","40","40","40","40","40","40","40","40","40","40","40","40","41","42","42","43","44","45","45","46","46","46","46","47","47","47","48","49","50","50","50","50","50","51","51","51","51","51","51","51","52","52","52","52","52","53","53","53","53","53","54","54","54","54","55","55","55","56","56","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","57","57","57","57","57","57","58","58","59","60","60","60","60","61","62","62","62","62","62","62","62","62","62","62","62","62","62","62","62","63","63","63","63","63","63","63","63","64","65","65","65","65","65","65","65","65","65","65","65","65","66","66","66","66","66","66","67","68","68","68","69","69","69","70","70","71","71","71","71","71","71","71","71","71","72","72","72","72","72","73","73"],"to":["3","15","17","28","33","74","50","54","55","1","62","63","65","71","21","75","48","13","2","13","4","27","53","62","66","30","47","56","64","76","41","77","70","2","40","11","3","16","20","27","59","42","78","67","79","16","27","59","80","7","41","77","70","29","81","11","13","82","3","16","17","20","22","4","24","26","27","34","36","38","43","52","1","57","58","59","61","74","27","59","15","33","74","43","50","54","55","1","58","62","14","29","81","83","45","60","62","68","11","3","16","17","26","27","36","38","43","1","57","58","59","75","48","3","21","75","48","7","41","77","70","10","79","15","17","28","33","40","74","50","54","55","1","62","63","65","71","17","20","26","36","38","43","1","57","58","84","17","36","38","43","1","57","58","12","80","15","17","33","74","50","54","55","62","63","71","81","47","56","64","76","85","44","66","9","42","78","67","15","74","50","54","55","62","82","61","85","31","44","1","66","17","38","43","1","58","25","84","17","43","1","58","6","30","47","56","64","76","2","15","17","28","33","74","50","54","55","1","62","63","65","71","77","78","67","1","85","83","62","82","3","34","61","56","64","76","75","53","15","74","54","55","62","6","30","39","47","56","64","76","3","21","22","75","48","82","3","34","46","61","15","74","55","62","15","74","62","64","76","6","7","8","9","10","79","11","12","82","15","16","85","17","20","80","23","25","28","30","31","32","33","34","37","39","41","42","74","44","46","77","47","49","50","51","78","54","55","56","59","61","84","63","64","76","67","69","70","71","72","73","17","36","38","43","1","58","43","1","27","83","45","62","68","82","6","10","83","79","15","23","30","39","74","47","51","56","1","64","76","15","17","33","74","50","54","55","62","76","15","17","28","33","74","50","54","55","1","62","63","71","85","25","37","44","84","69","78","83","45","62","25","37","84","41","77","15","17","33","74","50","54","55","62","63","9","32","42","78","67","49","53"],"value":[3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot"},"manipulation":{"enabled":false}},"groups":null,"width":"100%","height":"900px","idselection":{"enabled":true,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":null,"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":false,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"}},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">graph_ppn</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/plot_pos_graph.html">plot_pos_graph</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="02-Extract-entity-co-ocurrences-with-POS_files/figure-html/police%20-cardinal%20+%20plot_pos_graph-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="sotu-example">Sotu example<a class="anchor" aria-label="anchor" href="#sotu-example"></a>
</h2>
<p>Using data from <a href="https://cran.r-project.org/web/packages/sotu/index.html" class="external-link">{SOTU}
package</a>, United States Presidential State of the Union
Addresses.</p>
</div>
<div class="section level2">
<h2 id="using-another-languages">Using another languages<a class="anchor" aria-label="anchor" href="#using-another-languages"></a>
</h2>
<p>How {networds} uses spacy to tag the words, the user must initialize
the model for the language. By default, spacy loads the English model.
If the model was previously used, to change the model, it is necessary
to end the loaded model with <code><a href="http://spacyr.quanteda.io/reference/spacy_finalize.html" class="external-link">spacyr::spacy_finalize()</a></code> and
then load the new model. For example, to load the Portuguese model, use
with <code>spacyr::spacy_initialize(model = "pt_core_news_lg")</code>.
If you just started the package with <code><a href="https://github.com/SoaresAlisson/networds" class="external-link">library(networds)</a></code>, you
can simply run <code>spacy_initialize(model = "pt_core_news_lg")</code>
in the console.</p>
<p>To download other language model, check models available at <a href="https://spacy.io/usage/models" class="external-link">spacy.io/usage/models</a> Ex.:
installing portuguese, the model available are:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">modelsPT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pt_core_news_sm"</span>, <span class="st">"pt_core_news_md"</span>, <span class="st">"pt_core_news_lg"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># installing the bigger model</span></span>
<span><span class="fu">spacyr</span><span class="fu">::</span><span class="fu"><a href="http://spacyr.quanteda.io/reference/spacy_download_langmodel.html" class="external-link">spacy_download_langmodel</a></span><span class="op">(</span><span class="va">modelsPT</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Alisson Soares.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
